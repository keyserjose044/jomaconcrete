---
/**
 * BaseLayout.astro — Joma Concrete LLC
 * Props (all optional):
 * - title: string
 * - description: string
 * - canonical: string (full URL; defaults to site root + current path if omitted)
 * - image: string (absolute or site-root path, e.g. "/images/og-image.jpg")
 * - noIndex: boolean (true -> noindex,nofollow)
 */
const {
  title = 'Joma Concrete | Concrete Contractor in Dallas–Fort Worth, TX',
  description = 'Professional concrete work in DFW — driveways, slabs, patios, ramps, and more. Call (214) 298-6681 for a free estimate.',
  canonical,
  image = '/images/og-image.jpg',
  noIndex = false
} = Astro.props;

const site = 'https://www.jomaconcrete.com';
const path = Astro.url?.pathname ?? '/';
const canonicalUrl = canonical ?? (site.replace(/\/$/, '') + path);
const ogImage = image?.startsWith('http') ? image : `${site}${image}`;
---
<html lang="en">
  <head>
    <!-- Styles -->
    <link rel="stylesheet" href="/styles/global.css" />

    <!-- Basic Meta -->
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>{title}</title>
    <meta name="description" content={description} />
    <meta name="robots" content={noIndex ? 'noindex, nofollow' : 'index, follow'} />
    <meta name="theme-color" content="#111827" />

    <!-- Canonical & Sitemap -->
    <link rel="canonical" href={canonicalUrl} />
    <link rel="sitemap" type="application/xml" href="/sitemap.xml" />

    <!-- Favicon -->
    <link rel="icon" href="/favicon.ico" />

    <!-- Open Graph -->
    <meta property="og:title" content={title} />
    <meta property="og:description" content={description} />
    <meta property="og:type" content="website" />
    <meta property="og:url" content={canonicalUrl} />
    <meta property="og:image" content={ogImage} />
    <meta property="og:locale" content="en_US" />

    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content={title} />
    <meta name="twitter:description" content={description} />
    <meta name="twitter:image" content={ogImage} />

    <!-- LocalBusiness JSON-LD -->
    <script type="application/ld+json">
      {JSON.stringify({
        "@context": "https://schema.org",
        "@type": "LocalBusiness",
        "name": "Joma Concrete",
        "url": site,
        "telephone": "+12142986681",
        "areaServed": "Dallas–Fort Worth, TX",
        "image": ogImage,
        "priceRange": "$$"
      })}
    </script>

    <!-- Page-level head slot (per-page tags) -->
    <slot name="head" />
  </head>

  <body>
    <!-- Header -->
    <header>
      <div class="navbar">
        <a class="brand" href="/">Joma Concrete</a>

        <!-- Mobile toggle (pure CSS) -->
        <input id="nav-toggle" type="checkbox" class="nav-toggle sr-only" />
        <label for="nav-toggle" class="hamburger" aria-label="Toggle navigation" role="button" tabindex="0">
          <span></span><span></span><span></span>
        </label>

        <nav class="nav-links">
          <a href="/">Home</a>
          <a href="/about">About</a>
          <a href="/gallery">Gallery</a>
          <a href="/contact" class="cta">Contact</a>
        </nav>
      </div>
    </header>

    <!-- Main -->
    <main class="container">
      <slot />
    </main>

    <!-- Footer -->
    <footer>
      <div class="container">
        <span>© {new Date().getFullYear()} Joma Concrete — DFW, Texas</span>
        <div style="display:flex; gap:16px; align-items:center;">
          <a href="tel:12142986681" class="cta">(214) 298-6681</a>
          <a href="mailto:josemarquez044@gmail.com">Email</a>
        </div>
      </div>
    </footer>
  </body>
</html>
