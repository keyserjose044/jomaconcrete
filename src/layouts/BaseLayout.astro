---
/**
 * BaseLayout.astro
 * Reusable layout with solid SEO defaults.
 *
 * Props (all optional):
 * - title: string
 * - description: string
 * - canonical: string (full URL; defaults to site root + current path if omitted)
 * - image: string (absolute or site-root path, e.g. "/images/og-image.jpg")
 * - noIndex: boolean (true -> noindex,nofollow)
 */
const {
  title = 'Joma Concrete | Concrete Contractor in Dallas–Fort Worth, TX',
  description = 'Professional concrete work in DFW — driveways, slabs, patios, ramps, and more. Call (214) 298-6681 for a free estimate.',
  canonical,
  image = '/images/og-image.jpg',
  noIndex = false
} = Astro.props;

// Compute a fallback canonical if none is passed
const site = 'https://www.jomaconcrete.com';
const path = Astro.url?.pathname ?? '/';
const canonicalUrl = canonical ?? (site.replace(/\/$/, '') + path);

// Ensure absolute OG/Twitter image if a root-relative path is provided
const ogImage = image?.startsWith('http') ? image : `${site}${image}`;
---
<html lang="en">
  <head>
    <!-- Basic Meta -->
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>{title}</title>
    <meta name="description" content={description} />
    <meta name="robots" content={noIndex ? 'noindex, nofollow' : 'index, follow'} />
    <meta name="theme-color" content="#111827" />

    <!-- Canonical & Sitemap -->
    <link rel="canonical" href={canonicalUrl} />
    <link rel="sitemap" type="application/xml" href="/sitemap.xml" />

    <!-- Favicon (adjust if you use .ico/.svg) -->
    <link rel="icon" href="/favicon.ico" />

    <!-- Open Graph -->
    <meta property="og:title" content={title} />
    <meta property="og:description" content={description} />
    <meta property="og:type" content="website" />
    <meta property="og:url" content={canonicalUrl} />
    <meta property="og:image" content={ogImage} />
    <meta property="og:locale" content="en_US" />

    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content={title} />
    <meta name="twitter:description" content={description} />
    <meta name="twitter:image" content={ogImage} />

    <!-- LocalBusiness JSON-LD (fill address if you want exact NAP) -->
    <script type="application/ld+json">
      {JSON.stringify({
        "@context": "https://schema.org",
        "@type": "LocalBusiness",
        "name": "Joma Concrete",
        "url": site,
        "telephone": "+12142986681",
        "areaServed": "Dallas–Fort Worth, TX",
        "image": ogImage,
        "priceRange": "$$"
      })}
    </script>

    <!-- Page-level head slot (optional extra tags per page) -->
    <slot name="head" />
  </head>

  <body style="font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; margin:0; color:#0f172a; background:#fff;">
    <header style="position:sticky; top:0; background:#ffffffcc; backdrop-filter:saturate(1.2) blur(6px); border-bottom:1px solid #e5e7eb; z-index:10;">
      <div style="max-width:1100px; margin:0 auto; padding:12px 16px; display:flex; gap:24px; align-items:center; justify-content:space-between;">
        <a href="/" style="font-weight:800; font-size:20px; text-decoration:none; color:#111827;">Joma Concrete</a>
        <nav style="display:flex; gap:16px;">
          <a href="/" style="text-decoration:none; color:#111827;">Home</a>
          <a href="/about" style="text-decoration:none; color:#111827;">About</a>
          <a href="/gallery" style="text-decoration:none; color:#111827;">Gallery</a>
          <a href="/contact" style="text-decoration:none; color:#111827; font-weight:600;">Contact</a>
        </nav>
      </div>
    </header>

    <main style="max-width:1100px; margin:0 auto; padding:24px 16px;">
      <slot />
    </main>

    <footer style="border-top:1px solid #e5e7eb; margin-top:48px;">
      <div style="max-width:1100px; margin:0 auto; padding:24px 16px; display:flex; flex-wrap:wrap; gap:12px; justify-content:space-between; align-items:center;">
        <span>© {new Date().getFullYear()} Joma Concrete — DFW, Texas</span>
        <div style="display:flex; gap:16px; align-items:center;">
          <a href="tel:12142986681" style="font-weight:600; text-decoration:none; color:#111827;">(214) 298-6681</a>
          <a href="mailto:josemarquez044@gmail.com" style="text-decoration:none; color:#111827;">Email</a>
        </div>
      </div>
    </footer>
  </body>
</html>
